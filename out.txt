rm -rf build/DEBUG/*
rm -rf ISO/*
cd target/x86_64 && make INCLUDES="/home/hgoel/Documents/Cardinal/. /home/hgoel/Documents/Cardinal/common /home/hgoel/Documents/Cardinal/managers /home/hgoel/Documents/Cardinal/drivers /home/hgoel/Documents/Cardinal/kmalloc /home/hgoel/Documents/Cardinal/target/hal /home/hgoel/Documents/Cardinal/libs/libc/include/x86_64 /home/hgoel/Documents/Cardinal/libs/libCardinal/include /home/hgoel/Documents/Cardinal/target/x86_64" CUR_DIR="/home/hgoel/Documents/Cardinal/target/x86_64" all
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/target/x86_64'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/target/x86_64'
llvm-link target/x86_64/boot.bc target/x86_64/bootstrap.bc target/x86_64/GDT/gdt.bc target/x86_64/IDT/idt.bc target/x86_64/CPUID/cpuid.bc target/x86_64/fpu/fpu.bc target/x86_64/rtc/rtc.bc target/x86_64/debug_gfx.bc target/x86_64/hal/memory.bc target/x86_64/hal/synchronization.bc target/x86_64/hal/thread.bc target/x86_64/hal/interrupts/interrupt_man.bc target/x86_64/hal/timer.bc target/x86_64/hal/syscall.bc target/x86_64/pit/pit.bc target/x86_64/hpet/hpet.bc target/x86_64/apic/apic.bc target/x86_64/apic/io_apic/io_apic.bc target/x86_64/apic/apic_init.bc target/x86_64/trampoline.bc target/x86_64/page_manager/phys_mem_manager.bc target/x86_64/virt_mem_manager/virt_mem_manager.bc target/x86_64/smp/smp.bc target/x86_64/syscalls/syscalls.bc target/x86_64/syscalls/arch_prctl.bc target/x86_64/pci/pci.bc target/x86_64/pci/pci_devices.bc target/x86_64/drivers/uhci/uhci.bc main.bc common/common.bc common/sprintf.bc common/list.bc common/initrd.bc common/unicode.bc managers/bootstrap_mem_pool/bootstrap_mem_pool.bc boot_information/multiboot2/parseMultiboot2.bc acpi/acpi_tables.bc kmalloc/kmalloc.bc kmalloc/block_alloc.bc managers/process_manager/process.bc managers/thread_manager/thread.bc managers/power_manager/pwm.bc managers/device_manager/device_manager.bc managers/syscall_manager/syscall.bc managers/syscall_manager/syscalls/syscall_main.bc managers/syscall_manager/syscalls/time.bc managers/syscall_manager/syscalls/thread.bc managers/syscall_manager/syscalls/memory.bc managers/syscall_manager/syscalls/ipc.bc managers/syscall_manager/syscalls/property.bc managers/syscall_manager/syscalls/errno.bc managers/syscall_manager/syscalls/boot_info.bc drivers/usb/controller.bc drivers/usb/uhci/uhci_controller.bc Sibyl/sec_mon.bc -o tmp.bc
opt -std-link-opts -O2 tmp.bc -S -o tmp0.bc
llc tmp.bc -O=0 -mtriple=x86_64-none-elf -mattr=-aes,-mmx,-mmx,-pclmul,-sse,-sse2,-sse3,-sse4.1,-sse4.2,-sse4a,-fma,-ssse3 -code-model=kernel -o tmp.S
rm tmp0.bc tmp.bc
x86_64-elf-gcc  tmp.S -c -o tmp.o
mkdir -p build/DEBUG
x86_64-elf-gcc -T target/x86_64/linker.ld -o "build/DEBUG/kernel.bin" -ffreestanding -O2 -mno-red-zone -nostdlib -z max-page-size=0x1000 target/x86_64/boot.S.o target/x86_64/trampoline.S.o  tmp.o -mcmodel=kernel
sh scripts/rebuild-initrd.sh
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/sys_init'
rm -rf main.o initrd.o
rm -rf sys_init.elf
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/sys_init'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/sys_init'
x86_64-elf-cardinal-gcc -Iinclude   -c -o main.o main.c
x86_64-elf-cardinal-gcc -Iinclude   -c -o initrd.o initrd.c
x86_64-elf-cardinal-gcc -nostartfiles main.o initrd.o  -o sys_init.elf
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/sys_init'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/sys_init'
cp *.elf /home/hgoel/Documents/Cardinal/initrd
cp *.data /home/hgoel/Documents/Cardinal/initrd
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/sys_init'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/userboot'
rm -rf main.o initrd.o elf.o program.o
rm -rf userboot.bin
rm -rf userboot.elf
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/userboot'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/userboot'
x86_64-elf-cardinal-gcc -Iinclude -std=c11   -c -o main.o main.c
x86_64-elf-cardinal-gcc -Iinclude -std=c11   -c -o initrd.o initrd.c
x86_64-elf-cardinal-gcc -Iinclude -std=c11   -c -o elf.o elf.c
x86_64-elf-cardinal-gcc -Iinclude -std=c11   -c -o program.o program.c
x86_64-elf-cardinal-gcc -nostartfiles -T linker.ld main.o initrd.o elf.o program.o  -o userboot.elf
x86_64-elf-cardinal-objcopy --strip-all -O binary userboot.elf userboot.bin
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/userboot'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/userboot'
cp *.bin /home/hgoel/Documents/Cardinal/initrd
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/userboot'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/elf_server'
rm -rf main.o elf.o program.o
rm -rf elf_server.elf
rm -rf elf_server.elf
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/elf_server'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/elf_server'
x86_64-elf-cardinal-gcc -Iinclude -std=c11   -c -o main.o main.c
x86_64-elf-cardinal-gcc -Iinclude -std=c11   -c -o elf.o elf.c
x86_64-elf-cardinal-gcc -Iinclude -std=c11   -c -o program.o program.c
x86_64-elf-cardinal-gcc -nostartfiles main.o elf.o program.o  -o elf_server.elf
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/elf_server'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/elf_server'
mkdir -p /home/hgoel/Documents/Cardinal/root/sys/bin/../../srv/elf
cp elf_server.elf /home/hgoel/Documents/Cardinal/root/sys/bin/../../srv/elf/server.elf
cp elf_server.elf /home/hgoel/Documents/Cardinal/initrd
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/elf_server'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/namespace_man'
rm -rf main.o
rm -rf namespace_man.elf
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/namespace_man'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/namespace_man'
x86_64-elf-cardinal-gcc    -c -o main.o main.c
x86_64-elf-cardinal-gcc main.o  -o namespace_man.elf
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/namespace_man'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/namespace_man'
cp namespace_man.elf /home/hgoel/Documents/Cardinal/root/sys/bin/../bin
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/namespace_man'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/perm_man'
rm -rf main.o
rm -rf namespace_man.elf
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/perm_man'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/perm_man'
x86_64-elf-cardinal-gcc    -c -o main.o main.c
x86_64-elf-cardinal-gcc main.o  -o namespace_man.elf
Makefile:16: recipe for target 'namespace_man.elf' failed
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/perm_man'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/perm_man'
cp namespace_man.elf /home/hgoel/Documents/Cardinal/root/sys/bin/../bin
Makefile:19: recipe for target 'install' failed
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/perm_man'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/root_srv'
rm -rf main.o
rm -rf root_srv.elf
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/root_srv'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/root_srv'
x86_64-elf-cardinal-gcc    -c -o main.o main.c
<builtin>: recipe for target 'main.o' failed
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/root_srv'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/root_srv'
cp root_srv.elf /home/hgoel/Documents/Cardinal/root/sys/bin/../bin
Makefile:19: recipe for target 'install' failed
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/root_srv'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/shmem'
rm -rf main.o
rm -rf shmem_srv.elf
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/shmem'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/shmem'
x86_64-elf-cardinal-gcc    -c -o main.o main.c
x86_64-elf-cardinal-gcc main.o -lcserver -o shmem_srv.elf
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/shmem'
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/srv/shmem'
cp shmem_srv.elf /home/hgoel/Documents/Cardinal/root/sys/bin/../bin
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/srv/shmem'
cd initrd && make INCLUDES="/home/hgoel/Documents/Cardinal/. /home/hgoel/Documents/Cardinal/common /home/hgoel/Documents/Cardinal/managers /home/hgoel/Documents/Cardinal/drivers /home/hgoel/Documents/Cardinal/kmalloc /home/hgoel/Documents/Cardinal/target/hal /home/hgoel/Documents/Cardinal/libs/libc/include/x86_64 /home/hgoel/Documents/Cardinal/libs/libCardinal/include /home/hgoel/Documents/Cardinal/target/x86_64" CUR_DIR="/home/hgoel/Documents/Cardinal/target/x86_64" all
make[1]: Entering directory '/home/hgoel/Documents/Cardinal/initrd'
tar cvf initrd *.*
boot_screen.data
elf_server.elf
namespace_man.elf
shmem_srv.elf
sys_init.elf
userboot.bin
make[1]: Leaving directory '/home/hgoel/Documents/Cardinal/initrd'
cp initrd/initrd build/DEBUG/initrd
mkdir -p ISO
mkdir -p ISO/isodir
mkdir -p ISO/isodir/boot
cp "build/DEBUG/kernel.bin" ISO/isodir/boot/kernel.bin
cp "build/DEBUG/initrd" ISO/isodir/boot/initrd
mkdir -p ISO/isodir/boot/grub
cp grub.cfg ISO/isodir/boot/grub/grub.cfg
grub2-mkrescue -o ISO/os.iso ISO/isodir
qemu-system-x86_64 -m 4096M -machine q35, -cpu Haswell,+invtsc,+xsave -smp 4 -d int,cpu_reset,guest_errors -drive id=disk,file=disk.img,if=none -device ahci,id=ahci -device ide-drive,drive=disk,bus=ahci.0 -net nic,model=rtl8139, -net user -device intel-hda -device hda-duplex -device ich9-usb-uhci3 -device usb-mouse -device usb-kbd -cdrom "ISO/os.iso"
